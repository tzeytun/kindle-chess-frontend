<!doctype html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Kindle Chess</title>

  <style>
    /* ===== KİNDLE SAFE RESET ===== */
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #fff;
      font-family: sans-serif;
    }

    /* ===== GERÇEK MERKEZLEME ===== */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    /* ===== ANA KONTEYNER ===== */
    #appRoot {
      width: 100%;
      max-width: 420px;          /* Kindle için ideal */
      min-height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 8px;
    }

    /* ===== LOBBY & GAME GENEL ===== */
    .screen {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* ===== LOBBY ===== */
    #lobbyScreen {
      gap: 10px;
    }

    h1 {
      font-size: 18px;
      margin: 4px 0;
    }

    h2 {
      font-size: 13px;
      margin: 0 0 4px 0;
    }

    button, input {
      font-size: 12px;
      background: #fff;
    }

    button {
      cursor: pointer;
    }

    /* ===== OYUN EKRANI ===== */
    #gameScreen {
      height: 100%;
      justify-content: space-between;
    }

    /* ===== SATRANÇ TAHTASI ===== */
    #board {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-template-rows: repeat(8, 1fr);
      border: 2px solid #000;

      /* Kindle uyumlu ölçek */
      width: min(90vw, 320px);
      height: min(90vw, 320px);
    }

    /* ===== TIMER BAR ===== */
    .topBar, .bottomBar {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 6px;
      border-color: #999;
    }

    .topBar {
      border-bottom: 1px solid #999;
    }

    .bottomBar {
      border-top: 1px solid #999;
    }

    .timer {
      border: 2px solid #000;
      padding: 2px 6px;
      font-family: monospace;
      font-weight: bold;
      font-size: 16px;
      background: #fff;
    }

    .indicator {
      font-size: 12px;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>

<body>

<div id="appRoot">

  <!-- ===== LOBBY ===== -->
  <div id="lobbyScreen" class="screen">

    <h1>Kindle Chess</h1>

    <div style="border:2px solid #000; padding:8px; width:100%; text-align:center;">
      <h2>Hızlı Oyun</h2>
      <div style="display:flex; justify-content:center; gap:6px;">
        <button onclick="joinQueue('5')" style="border:2px solid #000; padding:6px 14px;">5 dk</button>
        <button onclick="joinQueue('10')" style="border:2px solid #000; padding:6px 14px;">10 dk</button>
      </div>
      <div id="lobbyStatus" style="font-size:11px; margin-top:4px;">Mod seç...</div>
    </div>

    <div style="border:2px solid #000; padding:8px; width:100%; text-align:center;">
      <h2>Bot</h2>
      <div style="display:flex; gap:4px;">
        <button onclick="playVsBot('easy')" style="flex:1; border:2px solid #000;">Kolay</button>
        <button onclick="playVsBot('medium')" style="flex:1; border:2px solid #000;">Orta</button>
        <button onclick="playVsBot('hard')" style="flex:1; border:2px solid #000; font-weight:bold;">Zor</button>
      </div>
    </div>

    <div style="border:2px solid #000; padding:8px; width:100%; text-align:center;">
      <h2>Arkadaş</h2>
      <button onclick="createRoom()" style="width:100%; border:2px solid #000; margin-bottom:4px;">Oda Kur</button>
      <div style="display:flex; gap:4px;">
        <input id="roomInput" placeholder="KOD"
               style="flex:1; border:2px solid #000; text-align:center;" />
        <button onclick="joinRoom()" style="border:2px solid #000;">GİR</button>
      </div>
    </div>

    <button onclick="localStorage.clear(); location.reload();"
            style="font-size:11px; color:#b00000; background:none; border:none; text-decoration:underline;">
      Kimliği Sıfırla
    </button>

    <div style="font-size:11px;">ID: <span id="playerIdDisplay">...</span></div>
  </div>

  <!-- ===== GAME ===== -->
  <div id="gameScreen" class="screen hidden">

    <div class="topBar">
      <div id="status" style="font-size:11px; font-weight:bold;">Bağlanıyor...</div>
      <div style="display:flex; gap:4px; align-items:center;">
        <span id="blackIndicator" class="indicator hidden">⏳</span>
        <div id="blackTimer" class="timer">--:--</div>
      </div>
    </div>

    <div style="flex-grow:1; display:flex; align-items:center; justify-content:center;">
      <div id="board"></div>
    </div>

    <div class="bottomBar">
      <div style="display:flex; gap:4px; align-items:center;">
        <div id="whiteTimer" class="timer">--:--</div>
        <span id="whiteIndicator" class="indicator hidden">⏳</span>
      </div>

      <div class="kindle-actions">

    <div class="kindle-flash-group">
        <button id="refreshBtn"
                class="border border-black px-3 py-1 font-bold text-xs"
                title="Ekranı temizle">
            ⚡
        </button>
    </div>

    <button id="resignBtn"
            class="border-2 border-black px-3 py-1 font-bold text-xs kindle-exit-btn">
        Oyunu Terk Et
    </button>

</div>


  </div>

</div>

<script type="module" src="/src/main.ts"></script>
</body>
</html>
